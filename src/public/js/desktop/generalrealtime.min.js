(function (d) {
  function b() {
    var m = getCookie("islogin");
    if (m == 1) {
      var o = true;
      if (typeof Storage !== "undefined") {
        var j = sessionStorage.getItem("un");
        var l = sessionStorage.getItem("uav");
        if (j != "" && j != null) {
          o = false;
          var k = rooturl_store + "templates/current/images/noavatar.png";
          if (l != "" && l != null) {
            k = l;
          }
          var i = '<div class="logged">';
          i +=
            '<div class="avatar"><img src="' + k + '" alt="User Avatar"></div>';
          i += '<div class="logged-menu">';
          i += "<ul>";
          i += "<li>Xin chào, " + j + "</li>";
          i +=
            '<li><a href="' +
            rooturl_store +
            'profile">Thông tin tài khoản</a></li>';
          i += '<li><a href="' + rooturl_store + 'logout">Đăng xuất</a></li>';
          i += "</ul></div></div>";
          d(".header-top .tool-right .profile").html(i);
          var p = "<ul>";
          p += "<li>Xin chào, " + j + "</li>";
          p +=
            '<li class="avatar"><img src="' +
            k +
            '" alt="User Avatar"></li></ul>';
          d(".main-header .main-header-top .profile").html(p);
          var n = "<ul>";
          n +=
            '<li><a href="' +
            rooturl_store +
            'profile">Thông tin tài khoản</a></li>';
          n +=
            '<li><a href="' + rooturl_store + 'logout">Đăng xuất</a></li></ul>';
          d(".main-header .main-header-bottom").html(n);
        }
      }
      if (o) {
        a();
      }
    }
  }
  function a() {
    d.ajax({
      type: "GET",
      dataType: "json",
      url: rooturl_store + "generalrealtime/checklogin",
      error: function () {},
      success: function (m) {
        if (m.rs) {
          var l = "/templates/current/img/profile/thanhvien.png";
          if (typeof Storage !== "undefined") {
            var i = localStorage.getItem("uv");
            if (i !== null && i > 0 && (i == 10 || i == 15)) {
              if (i == 10) {
                l = "/templates/current/img/profile/bac.png";
              }
              if (i == 15) {
                l = "/templates/current/img/profile/vang.png";
              }
            }
          }
          var j = m.name.split(" ");
          var o =
            '<div class="myaccounttoggle"><img src="' +
            l +
            '" style="width:25px" alt="vascara.com">Chào, ' +
            j[j.length - 1] +
            "</div>";
          o += '<div class="list-login">';
          o += '<ul class="login">';
          o += '<li><a href="/profile">Thông tin tài khoản</a></li>';
          o += '<li><a href="/logout">Đăng xuất</a></li>';
          o += "</ul></div>";
          d(".myaccount").html(o);
          var j = m.name.split(" ");
          var k = "Khách";
          if (j[j.length - 1] != "") {
            k = j[j.length - 1];
          }
          var q = rooturl_store + "templates/current/images/noavatar.png";
          if (m.avatar != "") {
            q = m.avatar;
          }
          var s = '<div class="logged">';
          s +=
            '<div class="avatar"><img src="' + q + '" alt="User Avatar"></div>';
          s += '<div class="logged-menu">';
          s += "<ul>";
          s += "<li>Xin chào, " + k + "</li>";
          s +=
            '<li><a href="' +
            rooturl_store +
            'profile">Thông tin tài khoản</a></li>';
          s += '<li><a href="' + rooturl_store + 'logout">Đăng xuất</a></li>';
          s += "</ul></div></div>";
          d(".header-top .tool-right .profile").html(s);
          var t = "<ul>";
          t += "<li>Xin chào, " + k + "</li>";
          t +=
            '<li class="avatar"><img src="' +
            q +
            '" alt="User Avatar"></li></ul>';
          d(".main-header .main-header-top .profile").html(t);
          var r = "<ul>";
          r +=
            '<li><a href="' +
            rooturl_store +
            'profile">Thông tin tài khoản</a></li>';
          r +=
            '<li><a href="' + rooturl_store + 'logout">Đăng xuất</a></li></ul>';
          d(".main-header .main-header-bottom").html(r);
          if (typeof Storage !== "undefined") {
            sessionStorage.setItem("un", k);
            sessionStorage.setItem("uav", q);
          }
        } else {
          setCookie("islogin", 1, -30);
          if (typeof Storage !== "undefined") {
            localStorage.removeItem("uv", 0);
          }
          var o =
            '<div class="myaccounttoggle"><img src="/templates/current/img/n-icon/user.png" alt="vascara.com">Đăng nhập</div>';
          o += '<div class="list-login">';
          o += '<ul class="login">';
          o += '<li><a href="/login">Đăng nhập</a></li>';
          o += '<li><a href="/register">Tạo tài khoản</a></li>';
          o += "</ul></div>";
          d(".myaccount").html(o);
          var p = '<div class="loggin">';
          p += "<ul>";
          p += '<li><a href="' + rooturl_store + 'register">ĐĂNG KÝ</a></li>';
          p += '<li><a href="' + rooturl_store + 'login">ĐĂNG NHẬP</a></li>';
          p += "</ul></div>";
          d(".header-top .tool-right .profile").html(p);
          var n = "<ul>";
          n += '<li><a href="' + rooturl_store + 'register">Đăng ký</a></li>';
          n +=
            '<li><a href="' + rooturl_store + 'login">Đăng nhập</a></li></ul>';
          d(".main-header .main-header-bottom").html(n);
          var q = rooturl_store + "templates/current/images/noavatar.png";
          var t = "<ul>";
          t +=
            '<li class="avatar"><img src="' +
            q +
            '" alt="User Avatar"></li></ul>';
          d(".main-header .main-header-top .profile").html(t);
        }
      },
    });
  }
  function f() {
    var i = getCookie("ctiic");
    if (i == "") {
      d.ajax({
        type: "GET",
        dataType: "json",
        url: rooturl_store + "cart/gettotalitemincart",
        error: function () {},
        success: function (k) {
          d(".cart .carttoggle span").text(k.total);
          d(".cart span.count").text("(" + k.total + ")");
        },
      });
    } else {
      var j = base64_decode(i);
      if (j !== false) {
        d(".cart .carttoggle span").text(j);
        d(".cart span.count").text("(" + j + ")");
      }
    }
  }
  function h() {
    d(".btnwl-confirm").click(function () {
      var i = d("#hd-warehouse-location").val();
      d.ajax({
        type: "POST",
        dataType: "json",
        data: { fwlocation: i },
        url: rooturl_store + "generalrealtime/changewarehouselocation",
        error: function () {},
        success: function (j) {
          location.reload(true);
        },
      });
    });
  }
  function e() {
    var j = 1;
    var i = getCookie("fwlc");
    if (i == "") {
      d.ajax({
        type: "GET",
        dataType: "json",
        url: rooturl_store + "generalrealtime/warehouselocation",
        error: function () {},
        success: function (m) {
          if (m.succ) {
            d("#hd-warehouse-location option[value='" + m.wl + "']").attr(
              "selected",
              "selected"
            );
            var n = d("#hd-warehouse-location option:selected").text();
            d(".hdwlname").text(n);
          }
          if (m.show == 1) {
            d(".popup-loca").addClass("show-popup");
          }
          j = m.wl;
          d("#hd-warehouse-location")
            .select2({ minimumResultsForSearch: -1 })
            .select2("val", j.toString());
        },
      });
    } else {
      var k = base64_decode(i);
      if (k !== false) {
        d("#hd-warehouse-location option[value='" + k + "']").attr(
          "selected",
          "selected"
        );
        var l = d("#hd-warehouse-location option:selected").text();
        d(".hdwlname").text(l);
        d("#hd-warehouse-location")
          .select2({ minimumResultsForSearch: -1 })
          .select2("val", k);
      } else {
        d.ajax({
          type: "GET",
          dataType: "json",
          url: rooturl_store + "generalrealtime/warehouselocation",
          error: function () {},
          success: function (m) {
            if (m.succ) {
              d("#hd-warehouse-location option[value='" + m.wl + "']").attr(
                "selected",
                "selected"
              );
              var n = d("#hd-warehouse-location option:selected").text();
              d(".hdwlname").text(n);
            }
            if (m.show == 1) {
              d(".popup-loca").addClass("show-popup");
            }
            j = m.wl;
            d("#hd-warehouse-location")
              .select2({ minimumResultsForSearch: -1 })
              .select2("val", j.toString());
          },
        });
      }
    }
  }
  function g() {
    d.ajax({
      type: "GET",
      dataType: "json",
      url: rooturl_store + "generalrealtime/getLocation",
      error: function () {},
      success: function (i) {
        html = "";
        if (i.show == 1) {
          d(".popup-loca-sale").addClass("show-popup");
        }
        d.each(i.data, function (j, k) {
          html += '<option value="' + k.id + '">' + k.name + "</option>";
        });
        d(".popup-loca-sale .select-area").html(html);
        d(".popup-loca-sale .select-area").prop("disabled", false);
      },
    });
  }
  function c() {
    d(".btn-smit").click(function () {
      var i = d(".popup-loca-sale .select-area").val();
      if (i > 0) {
        d.ajax({
          type: "POST",
          dataType: "json",
          data: { flocation: i },
          url: rooturl_store + "generalrealtime/redirectLocation",
          error: function () {},
          success: function (j) {
            if (j.succ == 1) {
              window.location.href = rooturl_store + "uu-dai-dac-biet-20";
            } else {
              window.location.href = rooturl_store + "vascara-sale-off";
            }
          },
        });
      }
    });
  }
  d(function () {
    b();
    f();
    showVipPrice();
    h();
    e();
    c();
  });
})(jQuery);
function showVipPrice() {
  if (typeof Storage !== "undefined") {
    var a = localStorage.getItem("uv");
    if (a !== null && a > 0 && (a == 10 || a == 15)) {
    }
  }
}
function checkvip() {
  $.ajax({
    type: "GET",
    dataType: "json",
    url: rooturl_store + "generalrealtime/checkvip",
    error: function () {},
    success: function (a) {
      if (a.code > 0) {
        if ($("body .showvipprice").length > 0) {
          $("body .showvipprice").each(function () {
            var d = $(this).html();
            var c = $(this).attr("data-price");
            var b = $(this).attr("data-type");
            if (d == "" && b == 1) {
              $(this).html(
                "Giá " +
                  a.title +
                  " : " +
                  formatNumber((c * (100 - a.code)) / 100) +
                  " VND"
              );
            }
          });
        }
      }
    },
  });
}
function formatNumber(b) {
  numberTemp = b;
  b = b.toFixed(2) + "";
  x = b.split(".");
  x1 = x[0];
  x2 = x.length > 1 ? "." + x[1] : "";
  var a = /(\d+)(\d{3})/;
  while (a.test(x1)) {
    x1 = x1.replace(a, "$1.$2");
  }
  return x1;
}
if (navigator.cookieEnabled) {
  function setCookie(b, f, c) {
    if (!c) {
      c = 365;
    }
    var e = new Date();
    e.setTime(e.getTime() + c * 24 * 60 * 60 * 1000);
    var a = "expires=" + e.toUTCString();
    document.cookie = b + "=" + f + ";" + a + ";path=/";
  }
  function getCookie(d) {
    var b = d + "=";
    var a = document.cookie.split(";");
    for (var e = 0; e < a.length; e++) {
      var f = a[e];
      while (f.charAt(0) == " ") {
        f = f.substring(1);
      }
      if (f.indexOf(b) == 0) {
        return f.substring(b.length, f.length);
      }
    }
    return "";
  }
  function base64_encode(a) {
    return window.btoa(unescape(encodeURIComponent(a)));
  }
  function base64_decode(a) {
    a = a.split("%3D").join("=");
    try {
      return decodeURIComponent(escape(window.atob(a)));
    } catch (b) {
      return false;
    }
  }
  var urlParams = new URLSearchParams(window.location.search);
  var utm = urlParams.get("utm_source");
  var utmm = urlParams.get("utm_medium");
  if (utm == "talent" && utmm != "") {
    setCookie("utmtalent", utmm, 30);
    if (getCookie("ecomobi") != "") {
      setCookie("ecomobi", getCookie("ecomobi"), -1);
    }
    if (getCookie("masoffer") != "") {
      setCookie("masoffer", getCookie("masoffer"), -1);
    }
    if (getCookie("accesstrade") != "") {
      setCookie("accesstrade", getCookie("accesstrade"), -1);
    }
    if (getCookie("cs_ecom") != "") {
      setCookie("cs_ecom", getCookie("cs_ecom"), -1);
    }
  }
} else {
  alert(
    "Trình duyệt của bạn đã chặn cookies, vui lòng bỏ chặn cookies để tiếp tục mua sắm."
  );
}
